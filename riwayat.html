<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Riwayat Transaksi</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="style.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
<div class="container py-4">
  <h4 class="text-primary mb-3">📜 Riwayat Transaksi</h4>
  <table class="table table-bordered table-striped">
    <thead><tr><th>Tanggal</th><th>Jenis</th><th>Deskripsi</th><th>Jumlah (Rp)</th></tr></thead>
    <tbody id="riwayatTabel"></tbody>
  </table>
  <button onclick="exportCSV()" class="btn btn-success">📁 Export CSV</button>
  <a href="index.html" class="btn btn-secondary mt-3">⬅️ Kembali</a>
</div>

<script>
let riwayat = JSON.parse(localStorage.getItem('riwayat')) || [];

function render() {
  const tbody = document.getElementById('riwayatTabel');
  tbody.innerHTML = '';
  riwayat.forEach(r => {
    tbody.innerHTML += `<tr><td>${r.tanggal}</td><td>${r.jenis}</td><td>${r.deskripsi}</td><td>${r.jumlah}</td></tr>`;
  });
}

function exportCSV() {
  let csv = "Tanggal,Jenis,Deskripsi,Jumlah\n";
  riwayat.forEach(r => {
    csv += `${r.tanggal},${r.jenis},${r.deskripsi},${r.jumlah}\n`;
  });
  const blob = new Blob([csv], { type: 'text/csv' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement("a");
  a.href = url;
  a.download = "riwayat_transaksi.csv";
  a.click();
}

render();
</script>
</body>
</html>